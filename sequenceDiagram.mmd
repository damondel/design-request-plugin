sequenceDiagram
    participant User
    participant FigmaUI as Figma Plugin UI
    participant FigmaMain as Figma Plugin Main
    participant ProxyServer as Proxy/Auth Server
    participant AIService as AI Model API
    
    User->>+FigmaUI: Trigger AI action
    Note over FigmaUI: User interacts with plugin
    
    FigmaUI->>+FigmaMain: Get design data
    FigmaMain-->>-FigmaUI: Return node/selection data
    
    FigmaUI->>+ProxyServer: Send request + auth
    Note over ProxyServer: Validates API key<br/>Handles CORS
    
    ProxyServer->>+AIService: Forward request
    AIService-->>-ProxyServer: AI response/prediction
    
    ProxyServer-->>-FigmaUI: Return AI result
    
    FigmaUI->>+FigmaMain: Apply AI result to design
    Note over FigmaMain: Modify Figma nodes<br/>Create new elements
    FigmaMain-->>-User: Confirm changes
    
    FigmaUI-->>-User: Show updated design